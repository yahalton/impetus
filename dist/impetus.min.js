!function(e,n){if("function"==typeof define&&define.amd)define(["exports","module"],n);else if("undefined"!=typeof exports&&"undefined"!=typeof module)n(exports,module);else{var t={exports:{}};n(t.exports,t),e.Impetus=t.exports}}(this,function(e,n){"use strict";function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function i(){var e=!1;try{var n=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,n)}catch(e){}return i=function(){return e},e}var o=.04,u=.11;window.addEventListener("touchmove",function(){});var r=function e(n){function r(){b.call(L,G,H)}function c(e){if("touchmove"===e.type||"touchstart"===e.type||"touchend"===e.type){var n=e.targetTouches[0]||e.changedTouches[0];if("function"==typeof M){var t=M(n.clientX,n.clientY);return{x:t[0],y:t[1],id:n.identifier}}return{x:n.clientX,y:n.clientY,id:n.identifier}}if("function"==typeof M){var t=M(e.clientX,e.clientY);return{x:t[0],y:t[1],id:null}}return{x:e.clientX,y:e.clientY,id:null}}function d(e){var n=c(e);N||Q||(N=!0,W=!1,z=n.id,U=j=n.x,V=k=n.y,Z=[],m(U,V),document.addEventListener("touchmove",a,!!i()&&{passive:!1}),document.addEventListener("touchend",f),document.addEventListener("touchcancel",v),document.addEventListener("mousemove",a,!!i()&&{passive:!1}),document.addEventListener("mouseup",f))}function a(e){if(!Q){e.preventDefault();var n=c(e);N&&n.id===z&&(j=n.x,k=n.y,m(U,V),p())}}function f(e){var n=c(e);N&&n.id===z&&v()}function v(){N=!1,m(U,V),x(),document.removeEventListener("touchmove",a),document.removeEventListener("touchend",f),document.removeEventListener("touchcancel",v),document.removeEventListener("mouseup",f),document.removeEventListener("mousemove",a)}function m(e,n){for(var t=Date.now();Z.length>0&&!(t-Z[0].time<=100);)Z.shift();Z.push({x:e,y:n,time:t})}function l(){var e=j-U,n=k-V;if(G+=e*T,H+=n*T,I){var t=y();0!==t.x&&(G-=e*h(t.x)*T),0!==t.y&&(H-=n*h(t.y)*T)}else y(!0);r(),U=j,V=k,K=!1}function h(e){return 5e-6*Math.pow(e,2)+1e-4*e+.55}function p(){K||s(l),K=!0}function y(e){var n=0,t=0;return void 0!==P&&G<P?n=P-G:void 0!==S&&G>S&&(n=S-G),void 0!==D&&H<D?t=D-H:void 0!==R&&H>R&&(t=R-H),e&&(0!==n&&(G=n>0?P:S),0!==t&&(H=t>0?D:R)),{x:n,y:t,inBounds:0===n&&0===t}}function x(){var e=Z[0],n=Z[Z.length-1],t=n.x-e.x,i=n.y-e.y,o=n.time-e.time,u=o/15/T;C=t/u||0,O=i/u||0;var r=y();Math.abs(C)>1||Math.abs(O)>1||!r.inBounds?(W=!0,s(w)):L.dispatchEvent(new Event("momentumend"))}function w(){if(W){C*=Y,O*=Y,G+=C,H+=O;var e=y();if(Math.abs(C)>J||Math.abs(O)>J||!e.inBounds){if(I){if(0!==e.x)if(e.x*C<=0)C+=e.x*o;else{var n=e.x>0?2.5:-2.5;C=(e.x+n)*u}if(0!==e.y)if(e.y*O<=0)O+=e.y*o;else{var n=e.y>0?2.5:-2.5;O=(e.y+n)*u}}else 0!==e.x&&(G=e.x>0?P:S,C=0),0!==e.y&&(H=e.y>0?D:R,O=0);r(),s(w)}else W=!1,L.dispatchEvent(new Event("momentumend"))}}var E=n.source,L=void 0===E?document:E,b=n.update,M=n.transforminput,g=n.multiplier,T=void 0===g?1:g,X=n.friction,Y=void 0===X?.92:X,B=n.initialValues,q=n.boundX,A=n.boundY,F=n.bounce,I=void 0===F||F;t(this,e);var P,S,D,R,U,V,j,k,z,C,O,G=0,H=0,J=.3*T,K=!1,N=!1,Q=!1,W=!1,Z=[];!function(){if(!(L="string"==typeof L?document.querySelector(L):L))throw new Error("IMPETUS: source not found.");if(!b)throw new Error("IMPETUS: update function not defined.");B&&(B[0]&&(G=B[0]),B[1]&&(H=B[1]),r()),q&&(P=q[0],S=q[1]),A&&(D=A[0],R=A[1]),L.addEventListener("touchstart",d),L.addEventListener("mousedown",d)}(),this.destroy=function(){return L.removeEventListener("touchstart",d),L.removeEventListener("mousedown",d),null},this.pause=function(){N=!1,Q=!0},this.resume=function(){Q=!1},this.setValues=function(e,n){"number"==typeof e&&(G=e),"number"==typeof n&&(H=n)},this.setMultiplier=function(e){T=e,J=.3*T},this.setBoundX=function(e){P=e[0],S=e[1]},this.setBoundY=function(e){D=e[0],R=e[1]}};n.exports=r;var s=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}()});